{% extends "base.html" %}
{% load static %}
{% block title %}{{ paste.title }} (#{{ paste.id }}){% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'sillypaste/pygments.css' %}">
<script>
 /* If anybody can get https://codepen.io/winny-/pen/BaKJYqd working I can
 delete this javascript! */
 (function(){
   window.addEventListener('load', () => {
     const p = document.querySelector('#body-container pre');
     document.getElementById('toggle-wrap').addEventListener('click', ({ target }) => {
       if (target.checked) p.classList.add('word-wrap');
       else p.classList.remove('word-wrap');
     });
   });
 })();
</script>
{% endblock %}
{% block content %}
{% if owner %}
<div class="flex justify-center bg-light-blue black ba dn-p mb1">
  <span class="ma1">You own this paste.  Would you like to&hellip;</span>
  <a class="ma1" href="{% url 'delete_paste' paste.id  %}">Delete this paste</a>
  <a class="ma1" href="{% url 'edit_paste' paste.id  %}">Edit this paste</a>
</div>
{% endif %}
<div class="flex">
  <h1 class="f2 ma1 w-90">{{ paste.title }}</h1>
  <div class="w-10 flex flex-column tr f5">
    <div class="h-40 h-100-p f3-p">
      #{{ paste.id }}
    </div>
    <div class="h-60 dn-p">
      <a href="{% url 'show_raw' paste.id %}">Raw</a>
    </div>
  </div>
</div>
<div class="flex flex-wrap justify-around">
  <div class="flex flex-column ma3">
    <div class="h-20 f4 b">Author</div>
    <div class="h-80">{{ paste.author.username|default:'Anonymous' }}</div>
  </div>
  <div class="flex flex-column ma3">
    <div class="h-20 f4 b">Created</div>
    <div class="h-80">{{ paste.timestamp }}</div>
  </div>
  <div class="flex flex-column ma3">
    <div class="h-20 f4 b">Expires</div>
    <div class="h-80">{{ paste.expiry|default:"Never" }}</div>
  </div>
  <div class="flex flex-column ma3"
       title="The title length plus the body length.  (Both as utf-8 bytes.)">
    <div class="h-20 f4 b">Size</div>
    <div class="h-80">{{ paste.size|filesizeformat }}</div>
  </div>
  <div class="flex flex-column ma3">
    <div class="h-20 f4 b">Hits</div>
    <div class="h-80">{{ paste.hits }}</div>
  </div>
</div>
<div>
  <input type="checkbox" id="toggle-wrap" class="dn-p">
  <label for="toggle-wrap" class="dn-p">Wrap long lines</label>
  <noscript class="i">(This feature requires Javascript, sorry! 🙁)</noscript>
</div>
<div id='body-container' class="code w-100 mt1 ba bw1 b--dark-gray pa1 br-0-p bl-0-p ph0-p bb-0-p b--black-p bg-white">
  {{paste_body_html|safe}}
</div>

{% endblock %}
